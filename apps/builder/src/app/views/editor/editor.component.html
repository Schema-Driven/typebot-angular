<div class="flex flex-col h-screen bg-slate-400 custom-bg">
  <header-bar></header-bar>
    
  <div *ngIf="addArray==false" class="flex flex-row w-full h-full">
    
    <div class="absolute flex flex-col top-20 w-80  left-4  z-10 bg-white p-3 rounded-lg custom-shadow overflow-y-scroll sidebar"
        [ngStyle]="{'height':'calc(100vh - 120px)'}">
      
      <div class="flex items-center justify-end mb-4">
        <a href="#" class="rounded-lg border-gray-200 border p-0.5 flex items-center justify-center w-8 h-8">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
        </a>
      </div>

      <!-- GroupStructuredBlockWrapper - begins -->
      <div cdkDropListGroup>
        <!-- GroupStructuredBlock[] - begins  -->
        <!-- (cdkDropListDropped)="drop($event)" -->
        <div 
        cdkDropList
        *ngFor="let structuredBlock of structuredBlocks"
        [id]="structuredBlock.uuid"
        [cdkDropListData]="structuredBlock.blocks"
        [cdkDropListConnectedTo]="['block-container']"
        [cdkDropListSortingDisabled]="true">
        <div class="pb-5">
            <label class="font-base text-gray-600 font-medium pb-2 pl-1.5">{{ structuredBlock.name }}</label>
            <div class=" flex flex-wrap">
              <!-- StructuredBlock[] -begins -->
              <div class="w-2/4 px-1.5 py-1.5 button-design" *ngFor="let block of structuredBlock.blocks">
                <div class="bg-slate-100   hover-shadow w-42 h-10 rounded-lg">
                  <div class=" bg-white  border border-slate-300 hover-shadow w-42 py-2 px-3 h-10 rounded-lg" cdkDrag (cdkDragStarted)="cdkDragStarted($event)" [cdkDragFreeDragPosition]="{x:block.position.x,y:block.position.y}" [id]="block.id">
                    <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
                    <div class="w-full text-sm px-2">
                      <img [src]="block.svg" class="toolbar-svg"/>
                      {{block.name}} 
                    </div>
                  </div>
                </div>
              </div>
              <!-- StructuredBlock[] -ends -->
            </div>
          </div>
        </div>
        <!-- GroupStructuredBlock[] - ends  -->
      </div>
      <!-- GroupStructuredBlockWrapper - ends -->
      
    </div>

    <div class="relative pl-64 w-full"
      cdkDropList
      id="block-container"
      [cdkDropListData]="blocks"
      [cdkDropListConnectedTo]="structuredBlocksConnector()"
      (cdkDropListDropped)="drop($event)"
      [cdkDropListSortingDisabled]="true"
      >
        <div 
          class="absolute" 
          *ngFor="let item of blocks" 
          [style]="('top:'+item.position.y+'px;left:'+item.position.x+'px')"
          [id]="item.id"
        >
          <div class="wrap-div w-72 bg-white p-4">
            <div class="title-div pb-4"> 
              <span class="font-sm font-normal ">{{item.name}}</span>
            </div>
            <div
              [id]="item.id"
              class="p-4 bg-slate-100 relative drap-bg-style"
            >
              <div class="example-custom-placeholder" *cdkDragPlaceholder></div>
                <div class="w-full px-2">
                {{item.name}}
                </div>
              </div>
            </div>
          </div>
    </div>
    <!-- ZOOM BUTTONS - [begins] -->
    <div class="absolute top-20 right-6">
      <div class="custom-shadow-icon">
        <a href="#" class="bg-white rounded-md p-0.5 w-8 h-8 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z" />
          </svg>
        </a>
      </div>
      <div class="mt-4 custom-shadow-icon">
        <a href="#" class="bg-white rounded-t-md p-0.5 w-8 h-8 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
          </svg>
        </a>
        <a href="#" class="bg-white rounded-b-md p-0.5 w-8 h-8 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M18 12H6" /> 
          </svg> 
        </a>
      </div>
    </div>
    <!-- ZOOM BUTTONS - [ends] -->
  </div>
  <div *ngIf="addArray">
    <list-item [item]="parentItem"
      [connectedDropListsIds]="connectedDropListsIds"
      (itemDrop)="onDragDrop($event)">
    </list-item>

    <div
      cdkDropList
      #doneList="cdkDropList"
      class="example-list"
      (cdkDropListDropped)="drop($event)">
      <div class="example-box" cdkDrag>
        
      </div>
    </div>
  </div>
</div>